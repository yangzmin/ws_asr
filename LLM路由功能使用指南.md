# LLMè·¯ç”±åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [åŠŸèƒ½çŠ¶æ€æ£€æŸ¥](#åŠŸèƒ½çŠ¶æ€æ£€æŸ¥)
- [å¯ç”¨æ–¹æ³•](#å¯ç”¨æ–¹æ³•)
- [é…ç½®è¯¦è§£](#é…ç½®è¯¦è§£)
- [APIè°ƒç”¨æ–¹æ³•](#apiè°ƒç”¨æ–¹æ³•)
- [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [ç›‘æ§ä¸è°ƒè¯•](#ç›‘æ§ä¸è°ƒè¯•)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [FAQå¸¸è§é—®é¢˜](#faqå¸¸è§é—®é¢˜)

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

LLMè·¯ç”±ç³»ç»Ÿæ˜¯ä¸€ä¸ªæ™ºèƒ½çš„å¤šAIå¤§æ¨¡å‹è°ƒåº¦ä¸­å¿ƒï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·è¯·æ±‚çš„å†…å®¹å’Œæ„å›¾ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„AIæ¨¡å‹è¿›è¡Œå“åº”ã€‚ç³»ç»Ÿæ”¯æŒå…³é”®è¯åŒ¹é…ã€æ„å›¾è¯†åˆ«å’Œæ··åˆè·¯ç”±ç­–ç•¥ï¼Œå®ç°äº†AIèƒ½åŠ›çš„ä¸“ä¸šåŒ–åˆ†å·¥å’Œæ™ºèƒ½è°ƒåº¦ã€‚

### æ ¸å¿ƒä»·å€¼
- **ğŸ¯ æ™ºèƒ½è·¯ç”±**ï¼šè‡ªåŠ¨è¯†åˆ«è¯·æ±‚ç±»å‹ï¼Œé€‰æ‹©æœ€é€‚åˆçš„AIæ¨¡å‹
- **âš¡ æ€§èƒ½ä¼˜åŒ–**ï¼šä¸“ç”¨æ¨¡å‹å¤„ç†ä¸“é—¨ä»»åŠ¡ï¼Œæå‡å“åº”è´¨é‡å’Œé€Ÿåº¦
- **ğŸ’° æˆæœ¬æ§åˆ¶**ï¼šæ ¹æ®ä»»åŠ¡å¤æ‚åº¦é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼Œä¼˜åŒ–æˆæœ¬
- **ğŸ”§ çµæ´»é…ç½®**ï¼šæ”¯æŒåŠ¨æ€æ·»åŠ ã€åˆ é™¤å’Œé…ç½®AIæ¨¡å‹
- **ğŸ“Š å…¨é¢ç›‘æ§**ï¼šå®æ—¶ç›‘æ§è·¯ç”±æ€§èƒ½å’Œæ¨¡å‹çŠ¶æ€

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. æ™ºèƒ½è·¯ç”±ç­–ç•¥
- **å…³é”®è¯è·¯ç”±**ï¼šåŸºäºé¢„å®šä¹‰å…³é”®è¯è§„åˆ™è¿›è¡Œè·¯ç”±
- **æ„å›¾è¯†åˆ«è·¯ç”±**ï¼šä½¿ç”¨AIæ¨¡å‹è¯†åˆ«ç”¨æˆ·æ„å›¾
- **æ··åˆè·¯ç”±**ï¼šç»“åˆå…³é”®è¯å’Œæ„å›¾è¯†åˆ«çš„ç»¼åˆç­–ç•¥

### 2. ä¸“ç”¨LLMç®¡ç†
- **åŠ¨æ€æ³¨å†Œ**ï¼šè¿è¡Œæ—¶æ·»åŠ å’Œåˆ é™¤ä¸“ç”¨LLM
- **è´Ÿè½½å‡è¡¡**ï¼šæ™ºèƒ½åˆ†é…è¯·æ±‚åˆ°ä¸åŒæ¨¡å‹
- **æ•…éšœè½¬ç§»**ï¼šè‡ªåŠ¨é™çº§åˆ°å¤‡ç”¨æ¨¡å‹

### 3. æ€§èƒ½ä¼˜åŒ–
- **æ™ºèƒ½ç¼“å­˜**ï¼šç¼“å­˜è·¯ç”±å†³ç­–å’Œå“åº”ç»“æœ
- **è¿æ¥æ± **ï¼šå¤ç”¨HTTPè¿æ¥æå‡æ€§èƒ½
- **å¼‚æ­¥å¤„ç†**ï¼šéé˜»å¡çš„è¯·æ±‚å¤„ç†æœºåˆ¶

### 4. ç›‘æ§ä¸ç®¡ç†
- **å®æ—¶ç›‘æ§**ï¼šè·¯ç”±æ€§èƒ½ã€æ¨¡å‹çŠ¶æ€ã€é”™è¯¯ç‡ç»Ÿè®¡
- **REST API**ï¼šå®Œæ•´çš„ç®¡ç†å’Œç›‘æ§æ¥å£
- **æ—¥å¿—è®°å½•**ï¼šè¯¦ç»†çš„è·¯ç”±å†³ç­–å’Œé”™è¯¯æ—¥å¿—

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·è¯·æ±‚      â”‚â”€â”€â”€â–¶â”‚   è·¯ç”±å™¨æ ¸å¿ƒ     â”‚â”€â”€â”€â–¶â”‚   ä¸“ç”¨LLMæ±      â”‚
â”‚  (WebSocket/    â”‚    â”‚  - æ„å›¾è¯†åˆ«      â”‚    â”‚  - è”ç½‘æŸ¥è¯¢LLM  â”‚
â”‚   REST API)     â”‚    â”‚  - å…³é”®è¯åŒ¹é…    â”‚    â”‚  - ä»£ç åŠ©æ‰‹LLM  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  - è·¯ç”±å†³ç­–      â”‚    â”‚  - é€šç”¨å¯¹è¯LLM  â”‚
                       â”‚  - ç¼“å­˜ç®¡ç†      â”‚    â”‚  - è‡ªå®šä¹‰LLM    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚   ç›‘æ§ä¸ç®¡ç†     â”‚
                       â”‚  - æ€§èƒ½æŒ‡æ ‡      â”‚
                       â”‚  - çŠ¶æ€ç›‘æ§      â”‚
                       â”‚  - APIç®¡ç†       â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” åŠŸèƒ½çŠ¶æ€æ£€æŸ¥

### æ£€æŸ¥è·¯ç”±å™¨æ³¨å†ŒçŠ¶æ€
è·¯ç”±å™¨å·²åœ¨ç³»ç»Ÿä¸­æ­£ç¡®æ³¨å†Œï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

```bash
# æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—ä¸­çš„æ³¨å†Œä¿¡æ¯
grep "router" src/logs/server.log

# æˆ–è€…å¯åŠ¨æœåŠ¡å™¨åæŸ¥çœ‹æ³¨å†Œçš„LLMæä¾›è€…
curl -X GET http://localhost:8080/api/router
```

### æ£€æŸ¥å½“å‰é…ç½®çŠ¶æ€
å½“å‰ `config.yaml` ä¸­çš„LLMé…ç½®ï¼š
- **å½“å‰æ¨¡å—**ï¼š`QwenLLM`ï¼ˆå•ä¸€æ¨¡å‹ï¼‰
- **è·¯ç”±çŠ¶æ€**ï¼šâŒ æœªå¯ç”¨
- **éœ€è¦æ“ä½œ**ï¼šåˆ‡æ¢åˆ° `RouterLLM` å¹¶æ·»åŠ è·¯ç”±é…ç½®

---

## ğŸš€ å¯ç”¨æ–¹æ³•

### æ­¥éª¤1ï¼šä¿®æ”¹æ¨¡å—é€‰æ‹©

åœ¨ `config.yaml` æ–‡ä»¶ä¸­æ‰¾åˆ° `selected_module` éƒ¨åˆ†ï¼ˆçº¦ç¬¬99è¡Œï¼‰ï¼Œå°†LLMæ¨¡å—æ”¹ä¸ºRouterLLMï¼š

```yaml
selected_module:
  ASR: DoubaoASR
  TTS: DoubaoTTS
  LLM: RouterLLM  # ä» QwenLLM æ”¹ä¸º RouterLLM
  VLLLM: ChatGLMVLLM
```

### æ­¥éª¤2ï¼šæ·»åŠ RouterLLMé…ç½®

åœ¨ `config.yaml` çš„LLMé…ç½®éƒ¨åˆ†æ·»åŠ å®Œæ•´çš„RouterLLMé…ç½®ï¼š

```yaml
LLM:
  # ä¿ç•™ç°æœ‰çš„å…¶ä»–LLMé…ç½®...
  
  RouterLLM:
    type: router
    router_config:
      # è·¯ç”±å™¨LLMï¼ˆç”¨äºæ„å›¾è¯†åˆ«ï¼‰
      router:
        type: openai
        model_name: qwen-flash-2025-07-28
        url: https://dashscope.aliyuncs.com/compatible-mode/v1
        api_key: sk-bb65b7b2775049d3827e76c3857027e5
        temperature: 0.1
        max_tokens: 500
      
      # ä¸“ç”¨LLMé…ç½®
      specialized_llms:
        internet_llm:
          type: openai
          model_name: qwen-flash-2025-07-28
          url: https://dashscope.aliyuncs.com/compatible-mode/v1
          api_key: sk-bb65b7b2775049d3827e76c3857027e5
          temperature: 0.3
          max_tokens: 2000
        
        code_llm:
          type: openai
          model_name: glm-4-flash
          url: https://open.bigmodel.cn/api/paas/v4/
          api_key: 75cd6a6a64c64acab762fe8a3f571bd2.avQ3LKXmKVjj1v8F
          temperature: 0.1
          max_tokens: 4000
        
        general_llm:
          type: openai
          model_name: qwen-flash-2025-07-28
          url: https://dashscope.aliyuncs.com/compatible-mode/v1
          api_key: sk-bb65b7b2775049d3827e76c3857027e5
          temperature: 0.7
          max_tokens: 2000
      
      # è·¯ç”±ç­–ç•¥é…ç½®
      routing_strategy:
        type: hybrid  # keyword | intent | hybrid
        keyword_rules:
          - keywords: ["å¤©æ°”", "æ¸©åº¦", "æ°”å€™", "ä¸‹é›¨", "æ™´å¤©", "é¢„æŠ¥"]
            target_llm: internet_llm
            confidence: 0.9
          - keywords: ["ä»£ç ", "ç¼–ç¨‹", "ç¨‹åº", "ç®—æ³•", "bug", "å‡½æ•°", "Python", "JavaScript", "Go"]
            target_llm: code_llm
            confidence: 0.8
          - keywords: ["æœç´¢", "æŸ¥è¯¢", "æœ€æ–°", "æ–°é—»", "å®æ—¶"]
            target_llm: internet_llm
            confidence: 0.7
        default_llm: general_llm
      
      # åŸºç¡€é…ç½®
      default_llm: general_llm
      confidence_threshold: 0.7
      cache_enabled: true
      cache_ttl: 300
      max_cache_size: 1000
```

### æ­¥éª¤3ï¼šé‡å¯æœåŠ¡å™¨

```bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ï¼ˆå¦‚æœæ­£åœ¨è¿è¡Œï¼‰
# Ctrl+C æˆ–è€… kill è¿›ç¨‹

# é‡æ–°ç¼–è¯‘å¹¶å¯åŠ¨
go build -o bin/server.exe ./src/main.go
./bin/server.exe
```

---

## âš™ï¸ é…ç½®è¯¦è§£

### è·¯ç”±å™¨LLMé…ç½®
```yaml
router:
  type: openai              # LLMç±»å‹
  model_name: qwen-flash    # æ¨¡å‹åç§°ï¼ˆå»ºè®®ä½¿ç”¨å¿«é€Ÿã€ä¾¿å®œçš„æ¨¡å‹ï¼‰
  temperature: 0.1          # ä½æ¸©åº¦ç¡®ä¿æ„å›¾è¯†åˆ«çš„ä¸€è‡´æ€§
  max_tokens: 500           # æ„å›¾è¯†åˆ«ä¸éœ€è¦å¤ªå¤štoken
```

### ä¸“ç”¨LLMé…ç½®
```yaml
specialized_llms:
  internet_llm:             # è”ç½‘æŸ¥è¯¢ä¸“ç”¨
    type: openai
    model_name: qwen-flash-2025-07-28
    temperature: 0.3        # ä¸­ç­‰åˆ›é€ æ€§
    max_tokens: 2000
  
  code_llm:                 # ä»£ç åŠ©æ‰‹ä¸“ç”¨
    type: openai
    model_name: glm-4-flash
    temperature: 0.1        # ä½åˆ›é€ æ€§ï¼Œç¡®ä¿ä»£ç å‡†ç¡®æ€§
    max_tokens: 4000        # ä»£ç ç”Ÿæˆéœ€è¦æ›´å¤štoken
  
  general_llm:              # é€šç”¨å¯¹è¯
    type: openai
    model_name: qwen-flash-2025-07-28
    temperature: 0.7        # é«˜åˆ›é€ æ€§
    max_tokens: 2000
```

### è·¯ç”±ç­–ç•¥é…ç½®
```yaml
routing_strategy:
  type: hybrid              # æ¨èä½¿ç”¨æ··åˆç­–ç•¥
  keyword_rules:
    - keywords: ["å…³é”®è¯1", "å…³é”®è¯2"]
      target_llm: ç›®æ ‡LLMåç§°
      confidence: 0.8       # åŒ¹é…ç½®ä¿¡åº¦
  default_llm: general_llm  # é»˜è®¤LLM
```

### ç¼“å­˜é…ç½®
```yaml
cache_enabled: true         # å¯ç”¨ç¼“å­˜
cache_ttl: 300             # ç¼“å­˜ç”Ÿå­˜æ—¶é—´ï¼ˆç§’ï¼‰
max_cache_size: 1000       # æœ€å¤§ç¼“å­˜æ¡ç›®æ•°
confidence_threshold: 0.7   # è·¯ç”±ç½®ä¿¡åº¦é˜ˆå€¼
```

---

## ğŸ“¡ APIè°ƒç”¨æ–¹æ³•

### WebSocketè°ƒç”¨ï¼ˆæ¨èï¼‰
```javascript
// å»ºç«‹WebSocketè¿æ¥
const ws = new WebSocket('ws://localhost:8000');

// å‘é€æ¶ˆæ¯ï¼ˆä¼šè‡ªåŠ¨è·¯ç”±ï¼‰
ws.send(JSON.stringify({
  type: 'chat',
  message: 'ä»Šå¤©åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ',  // ä¼šè·¯ç”±åˆ°internet_llm
  session_id: 'user_session_123'
}));

// æ¥æ”¶å“åº”
ws.onmessage = function(event) {
  const response = JSON.parse(event.data);
  console.log('AIå›å¤:', response.message);
};
```

### REST APIè°ƒç”¨

#### 1. è·¯ç”±å™¨çŠ¶æ€æŸ¥è¯¢
```bash
curl -X GET http://localhost:8080/api/router
```

å“åº”ç¤ºä¾‹ï¼š
```json
{
  "status": "active",
  "strategy": "hybrid",
  "llm_count": 3,
  "cache_enabled": true
}
```

#### 2. è·å–æ‰€æœ‰LLMçŠ¶æ€
```bash
curl -X GET http://localhost:8080/api/router/llms
```

#### 3. æµ‹è¯•è·¯ç”±å†³ç­–
```bash
curl -X POST http://localhost:8080/api/router/route \
  -H "Content-Type: application/json" \
  -d '{
    "message": "å¸®æˆ‘å†™ä¸€ä¸ªPythonæ’åºå‡½æ•°",
    "session_id": "test_session"
  }'
```

#### 4. è·å–è·¯ç”±ç»Ÿè®¡
```bash
curl -X GET http://localhost:8080/api/router/stats
```

#### 5. åŠ¨æ€LLMç®¡ç†
```bash
# æ³¨å†Œæ–°LLM
curl -X POST http://localhost:8080/api/router/llms \
  -H "Content-Type: application/json" \
  -d '{
    "name": "translation_llm",
    "config": {
      "type": "openai",
      "model_name": "gpt-4",
      "api_key": "your_api_key",
      "temperature": 0.3
    }
  }'

# æ³¨é”€LLM
curl -X DELETE http://localhost:8080/api/router/llms/translation_llm
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1. è”ç½‘æŸ¥è¯¢åœºæ™¯
**è§¦å‘å…³é”®è¯**ï¼šå¤©æ°”ã€æ–°é—»ã€è‚¡ä»·ã€å®æ—¶ä¿¡æ¯
**è·¯ç”±ç›®æ ‡**ï¼š`internet_llm`
**ç¤ºä¾‹è¯·æ±‚**ï¼š
- "ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”å¦‚ä½•ï¼Ÿ"
- "æœ€æ–°çš„ç§‘æŠ€æ–°é—»æœ‰å“ªäº›ï¼Ÿ"
- "æ¯”ç‰¹å¸ç°åœ¨çš„ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ"

### 2. ç¼–ç¨‹åŠ©æ‰‹åœºæ™¯
**è§¦å‘å…³é”®è¯**ï¼šä»£ç ã€ç¼–ç¨‹ã€ç®—æ³•ã€bugã€å‡½æ•°
**è·¯ç”±ç›®æ ‡**ï¼š`code_llm`
**ç¤ºä¾‹è¯·æ±‚**ï¼š
- "å¸®æˆ‘å†™ä¸€ä¸ªå¿«é€Ÿæ’åºç®—æ³•"
- "è¿™æ®µPythonä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ"
- "å¦‚ä½•ä¼˜åŒ–è¿™ä¸ªSQLæŸ¥è¯¢ï¼Ÿ"

### 3. é€šç”¨å¯¹è¯åœºæ™¯
**è§¦å‘æ¡ä»¶**ï¼šä¸åŒ¹é…ç‰¹å®šå…³é”®è¯çš„è¯·æ±‚
**è·¯ç”±ç›®æ ‡**ï¼š`general_llm`
**ç¤ºä¾‹è¯·æ±‚**ï¼š
- "ç»™æˆ‘è®²ä¸ªç¬‘è¯"
- "å¸®æˆ‘å†™ä¸€é¦–è¯—"
- "äººç”Ÿçš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"

---

## â­ æœ€ä½³å®è·µ

### 1. å…³é”®è¯è§„åˆ™ä¼˜åŒ–
```yaml
keyword_rules:
  # é«˜ç½®ä¿¡åº¦è§„åˆ™ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰
  - keywords: ["å¤©æ°”é¢„æŠ¥", "æ°”æ¸©", "é™é›¨æ¦‚ç‡"]
    target_llm: internet_llm
    confidence: 0.9
  
  # ä¸­ç­‰ç½®ä¿¡åº¦è§„åˆ™ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰
  - keywords: ["ä»£ç ", "ç¼–ç¨‹", "ç®—æ³•"]
    target_llm: code_llm
    confidence: 0.8
  
  # ä½ç½®ä¿¡åº¦è§„åˆ™ï¼ˆå…œåº•åŒ¹é…ï¼‰
  - keywords: ["æœç´¢", "æŸ¥è¯¢"]
    target_llm: internet_llm
    confidence: 0.6
```

### 2. æ¨¡å‹é€‰æ‹©å»ºè®®
- **è·¯ç”±å™¨LLM**ï¼šé€‰æ‹©å¿«é€Ÿã€ä¾¿å®œçš„æ¨¡å‹ï¼ˆå¦‚qwen-flashï¼‰
- **ä»£ç LLM**ï¼šé€‰æ‹©ä»£ç èƒ½åŠ›å¼ºçš„æ¨¡å‹ï¼ˆå¦‚glm-4-flashã€claude-3ï¼‰
- **è”ç½‘LLM**ï¼šé€‰æ‹©ä¿¡æ¯æ£€ç´¢èƒ½åŠ›å¼ºçš„æ¨¡å‹
- **é€šç”¨LLM**ï¼šé€‰æ‹©å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬çš„æ¨¡å‹

### 3. æ€§èƒ½ä¼˜åŒ–
```yaml
# ç¼“å­˜é…ç½®ä¼˜åŒ–
cache_enabled: true
cache_ttl: 600          # æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´
max_cache_size: 2000    # æ ¹æ®å†…å­˜æƒ…å†µè°ƒæ•´

# ç½®ä¿¡åº¦é˜ˆå€¼è°ƒæ•´
confidence_threshold: 0.7  # è¿‡ä½ä¼šè¯¯è·¯ç”±ï¼Œè¿‡é«˜ä¼šé™çº§è¿‡å¤š
```

### 4. ç›‘æ§æŒ‡æ ‡å…³æ³¨
- **è·¯ç”±å‡†ç¡®ç‡**ï¼šæ­£ç¡®è·¯ç”±çš„è¯·æ±‚æ¯”ä¾‹
- **å¹³å‡å“åº”æ—¶é—´**ï¼šåŒ…å«è·¯ç”±å†³ç­–çš„æ€»æ—¶é—´
- **ç¼“å­˜å‘½ä¸­ç‡**ï¼šç¼“å­˜ä½¿ç”¨æ•ˆç‡
- **é”™è¯¯ç‡**ï¼šè·¯ç”±å¤±è´¥å’ŒLLMè°ƒç”¨å¤±è´¥çš„æ¯”ä¾‹

---

## ğŸ“Š ç›‘æ§ä¸è°ƒè¯•

### 1. å®æ—¶ç›‘æ§
```bash
# æŸ¥çœ‹è·¯ç”±ç»Ÿè®¡
curl -X GET http://localhost:8080/api/router/stats

# æŸ¥çœ‹LLMçŠ¶æ€
curl -X GET http://localhost:8080/api/router/llms

# æŸ¥çœ‹ç¼“å­˜çŠ¶æ€
curl -X GET http://localhost:8080/api/router/cache
```

### 2. æ—¥å¿—åˆ†æ
```bash
# æŸ¥çœ‹è·¯ç”±å†³ç­–æ—¥å¿—
grep "routing decision" src/logs/server.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep "ERROR" src/logs/server.log | grep "router"

# æŸ¥çœ‹æ€§èƒ½æ—¥å¿—
grep "router metrics" src/logs/server.log
```

### 3. è°ƒè¯•æ¨¡å¼
åœ¨é…ç½®ä¸­å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š
```yaml
router_config:
  debug_mode: true        # å¯ç”¨è¯¦ç»†æ—¥å¿—
  log_routing_decisions: true  # è®°å½•è·¯ç”±å†³ç­–è¿‡ç¨‹
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. è·¯ç”±å™¨æ— æ³•å¯åŠ¨
**ç—‡çŠ¶**ï¼šæœåŠ¡å™¨å¯åŠ¨æ—¶æŠ¥é”™ï¼Œæç¤ºrouterç›¸å…³é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
go run src/main.go --check-config

# æ£€æŸ¥LLMé…ç½®æ˜¯å¦æ­£ç¡®
curl -X GET http://localhost:8080/api/router/llms
```

#### 2. è·¯ç”±å†³ç­–ä¸å‡†ç¡®
**ç—‡çŠ¶**ï¼šè¯·æ±‚è¢«è·¯ç”±åˆ°é”™è¯¯çš„LLM
**è§£å†³æ–¹æ¡ˆ**ï¼š
- è°ƒæ•´å…³é”®è¯è§„åˆ™å’Œç½®ä¿¡åº¦
- æ£€æŸ¥æ„å›¾è¯†åˆ«LLMçš„é…ç½®
- å¯ç”¨è°ƒè¯•æ¨¡å¼æŸ¥çœ‹å†³ç­–è¿‡ç¨‹

#### 3. æ€§èƒ½é—®é¢˜
**ç—‡çŠ¶**ï¼šå“åº”æ—¶é—´è¿‡é•¿
**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¯ç”¨ç¼“å­˜å¹¶è°ƒæ•´ç¼“å­˜å‚æ•°
- ä¼˜åŒ–å…³é”®è¯è§„åˆ™ï¼Œå‡å°‘æ„å›¾è¯†åˆ«è°ƒç”¨
- æ£€æŸ¥å„LLMçš„å“åº”æ—¶é—´

#### 4. LLMè°ƒç”¨å¤±è´¥
**ç—‡çŠ¶**ï¼šç‰¹å®šLLMæ— æ³•å“åº”
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥LLMé…ç½®
curl -X GET http://localhost:8080/api/router/llms/[llm_name]

# æµ‹è¯•LLMè¿æ¥
curl -X POST http://localhost:8080/api/router/test \
  -d '{"llm_name": "code_llm", "message": "test"}'
```

---

## â“ FAQå¸¸è§é—®é¢˜

### Q1: å¦‚ä½•æ·»åŠ æ–°çš„ä¸“ç”¨LLMï¼Ÿ
**A**: æœ‰ä¸¤ç§æ–¹å¼ï¼š
1. **é…ç½®æ–‡ä»¶æ–¹å¼**ï¼šåœ¨`config.yaml`ä¸­æ·»åŠ æ–°çš„LLMé…ç½®
2. **APIæ–¹å¼**ï¼šä½¿ç”¨REST APIåŠ¨æ€æ·»åŠ 
```bash
curl -X POST http://localhost:8080/api/router/llms \
  -H "Content-Type: application/json" \
  -d '{"name": "new_llm", "config": {...}}'
```

### Q2: è·¯ç”±ç­–ç•¥å¯ä»¥åŠ¨æ€ä¿®æ”¹å—ï¼Ÿ
**A**: ç›®å‰è·¯ç”±ç­–ç•¥éœ€è¦é€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹å¹¶é‡å¯æœåŠ¡å™¨ã€‚åŠ¨æ€ä¿®æ”¹åŠŸèƒ½åœ¨å¼€å‘è®¡åˆ’ä¸­ã€‚

### Q3: å¦‚ä½•å¤„ç†å¤šè¯­è¨€è·¯ç”±ï¼Ÿ
**A**: åœ¨å…³é”®è¯è§„åˆ™ä¸­æ·»åŠ å¤šè¯­è¨€å…³é”®è¯ï¼š
```yaml
keyword_rules:
  - keywords: ["weather", "å¤©æ°”", "ë‚ ì”¨"]
    target_llm: internet_llm
    confidence: 0.8
```

### Q4: ç¼“å­˜ä¼šå½±å“å®æ—¶æ€§å—ï¼Ÿ
**A**: å¯ä»¥é€šè¿‡è°ƒæ•´`cache_ttl`å‚æ•°æ§åˆ¶ç¼“å­˜æ—¶é—´ï¼Œæˆ–è€…ä¸ºç‰¹å®šç±»å‹çš„è¯·æ±‚ç¦ç”¨ç¼“å­˜ã€‚

### Q5: å¦‚ä½•ç›‘æ§æˆæœ¬ï¼Ÿ
**A**: é€šè¿‡è·¯ç”±ç»Ÿè®¡APIå¯ä»¥æŸ¥çœ‹å„LLMçš„è°ƒç”¨æ¬¡æ•°ï¼Œç»“åˆå„æ¨¡å‹çš„å®šä»·è®¡ç®—æˆæœ¬ã€‚

### Q6: æ”¯æŒå“ªäº›LLMæä¾›å•†ï¼Ÿ
**A**: ç›®å‰æ”¯æŒOpenAIå…¼å®¹çš„APIï¼ŒåŒ…æ‹¬ï¼š
- OpenAI GPTç³»åˆ—
- é˜¿é‡Œäº‘é€šä¹‰åƒé—®
- æ™ºè°±GLMç³»åˆ—
- æœ¬åœ°éƒ¨ç½²çš„å¼€æºæ¨¡å‹ï¼ˆé€šè¿‡OpenAIå…¼å®¹æ¥å£ï¼‰

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºå¯»æ±‚å¸®åŠ©ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**ï¼š`src/logs/server.log`
2. **æ£€æŸ¥é…ç½®**ï¼šå¯¹æ¯”`config-router-example.yaml`
3. **APIè°ƒè¯•**ï¼šä½¿ç”¨æä¾›çš„curlå‘½ä»¤æµ‹è¯•
4. **GitHub Issues**ï¼šæäº¤è¯¦ç»†çš„é—®é¢˜æè¿°å’Œæ—¥å¿—

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-01-27  
**é€‚ç”¨ç‰ˆæœ¬**: ws_asr v2.0+